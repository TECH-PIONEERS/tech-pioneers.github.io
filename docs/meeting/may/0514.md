---
title: 0514 íšŒì˜ë¡
layout: default
nav_order: 2
parent: 5ì›”
grand_parent: íšŒì˜ë¡
---

### ğŸ—“ï¸Â íšŒì˜ ì¼ì

2024.05.14

### ğŸ•› ì‘ì„±ì¼

2024.05.19

### ğŸš©Â íšŒì˜ ì¥ì†Œ

ì¸ì²œëŒ€í•™êµ

### ğŸ¤Â íšŒì˜ ì°¸ì„ì

êµ¬ë¯¼ì„±, ë¥˜ì§€ìˆ˜, ë°•ì£¼ë¯¸, í•œì˜ˆì§€

### ğŸ™Â ì‘ì„±ì

í•œì˜ˆì§€

## ğŸ“£ ì–´ì  ë‹¤

- IR ì§€ì—° ë¬¸ì œ í•´ê²°
- ê³µì˜ yì¢Œí‘œë¥¼ ì´ìš©í•˜ì—¬ ë°©í–¥ì´ ì „í™˜ë˜ëŠ”ì§€ íŒŒì•…
- ë¦¬ëª¨ì»¨ ì„¸íŒ… ë° ë¦¬ëª¨ì»¨ ë²„íŠ¼ ë“±ë¡

## âœï¸íšŒì˜ ë‚´ìš©

1. **IR ì§€ì—° ë¬¸ì œ í•´ê²°**

    IR ì§€ì—° ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ì—¬ëŸ¬ë²ˆì˜ SW ë° HW ë³€ê²½ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ì˜€ë‹¤. ê·¸ ê²°ê³¼ ë°‘ì˜ ì½”ë“œì™€ ê°™ì´ ì½”ë“œ ë‚´ìš©ì„ ìˆ˜ì •í•˜ì—¬ IR ì§€ì—° ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ë‹¤.

    (1) ì½”ë“œ íŒŒì¼ 1: [mapping-0514.py](https://github.com/TECH-PIONEERS/capstone-project/blob/99216c2d9e6f08390733c603fd00c5b0141d81ce/opencv/mapping-0514%20.py)
    - ë³¸ ì½”ë“œì— ìƒˆë¡œ ì¶”ê°€ëœ ì‚¬í•­
        - utils.pyì˜ `def is_valid_string(input_string)` ì— ì „ì²˜ë¦¬ & float â†’ int ë°˜ë³µë¬¸ í•˜ë‚˜ì— ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ìµœì í™”
        - `def get_serial(conn)`
            
            ```python
            myPort = serial.Serial('/dev/ttyUSB1', 9600,timeout=0.1)
            myPort1 = serial.Serial('/dev/ttyUSB0', 9600, timeout=0.1)
            ```
            
            baud rate 9600, timeout = 0.1ë¡œ ì„¤ì •
        

    (2) ì½”ë“œ íŒŒì¼ 2: [IRCamera.ino](https://github.com/TECH-PIONEERS/capstone-project/edit/main/IR/IRCamera.ino)

    - ë³¸ ì½”ë“œì—ì„œ ìˆ˜ì •ëœ ì‚¬í•­
        - setup()ì˜ Serial baudrate ì„¤ì • 9600ìœ¼ë¡œ í•˜í–¥
    
        ```arduino
        Serial.begin(9600);
        ```
        
        - loopí•¨ìˆ˜ì˜ delay 70msë¡œ ì¦ê°€
        
        ```arduino
        delay(70);
        ```
    <br/><br/>


2. **ê³µì˜ yì¢Œí‘œë¥¼ ì´ìš©í•˜ì—¬ ë°©í–¥ì´ ì „í™˜ë˜ëŠ”ì§€ íŒŒì•…**

    ê³µì´ ì•„í¬ë¦´ íŒì— ë¶€ë”ªíˆëŠ” ê²½ìš°ë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•´ ê³µì˜ yì¢Œí‘œë¥¼ ì´ìš©í•˜ì—¬ ë°©í–¥ì´ ì „í™˜ë˜ëŠ”ì§€ íŒŒì•…í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ë‹¤.

    ì½”ë“œ íŒŒì¼: [utils.pyì˜ return_ball_direction_change í•¨ìˆ˜](http://utils.py)

        - ëª©ì : ê³µì˜ yì¢Œí‘œë¥¼ ì´ìš©í•˜ì—¬ ë°©í–¥ì´ ì „í™˜ë˜ëŠ”ì§€ íŒŒì•…

        - í•¨ìˆ˜ ë‚´ìš©:

        ```python
        def return_ball_direction_change(previous_pos, current_pos, threshold=50):
            if abs(current_pos - previous_pos) >= threshold:
                if previous_pos < current_pos:
                    print('bottom')
                    return 'bottom'
                elif previous_pos > current_pos:
                    print('up')
                    return 'up'
        ```
        
    <br/><br/>

3. **ë¦¬ëª¨ì»¨ ì„¸íŒ… ë° ë¦¬ëª¨ì»¨ ë²„íŠ¼ ë“±ë¡**

    ë¦¬ëª¨ì»¨ ì„¸íŒ… ê³¼ì •ì€ í”„ë¡œì íŠ¸ ì´ˆë°˜ì— ì´ë¯¸ ì§„í–‰í•˜ì˜€ì—ˆëŠ”ë°, OSê°€ ë³€ê²½ë˜ë©° ë¦¬ëª¨ì»¨ ì„¸íŒ… ê³¼ì •ì„ ë‹¤ì‹œ ì§„í–‰í•˜ì˜€ë‹¤. ë˜í•œ ë¦¬ëª¨ì»¨ì´ ê°€ì§„ 3ê°œì˜ ê¸°ëŠ¥ì„ ìœ„í•´ ë¦¬ëª¨ì»¨ ë²„íŠ¼ 3ê°œë¥¼ ë“±ë¡í•˜ì˜€ë‹¤.

    (1) **ë¦¬ëª¨ì»¨ ì„¸íŒ…**

    - **Install LIRC**

        `sudo apt update`

        `sudo apt install -y lirc`

    - **Check lirc version**

        `lircd --version`

    - **Setting up LIRC**

        (**/dev/lirc1**: receiver,Â **/dev/lirc0**: transmitter)

        1) EditÂ **/etc/lirc/lirc_options.conf**
            
            driver = default
            
            device = /dev/lirc1
            
            (before:
            
            driver = devinput
            
            device = auto)
            
        2) EditÂ **/boot/firmware/config.txt**
            
            dtoverlay=gpio-ir,gpio_pin=22
            
            dtoverlay=gpio-ir-tx,gpio_pin=23
        

    - **Reboot Raspberry Pi**

        `sudo reboot`

    - **Using IR Receiver (outputting raw data)**

        `sudo systemctl stop lircd`

        `mode2 -d /dev/lirc1`

    (2) **ë¦¬ëª¨ì»¨ ë° ë²„íŠ¼ ë“±ë¡**

    1) ë“±ë¡ëª…ë ¹
        
        `irrecord -d /dev/lirc1 TECH-PIONEERS`
        
    2) ë“±ë¡ ë²„íŠ¼ (ë¦¬ëª¨ì»¨ ë§¨ ìœ„ì˜ ë²„íŠ¼ 3ê°œ)
        - KEY_0 0xFFA25D
        - KEY_1 0xFF629D
        - KEY_2 0xFFE21D

    3) ì›ë³¸ ë°±ì—… íŒŒì¼ ìƒì„±
        
        `sudo mv /etc/lirc/lircd.conf /etc/lirc/lircd-backup.conf`
        
    4) ë‚´ ë°±ì—… íŒŒì¼ ìƒì„±
        
        `sudo cp TECH-PIONEERS.lircd.conf TECH-PIONEERS.lircd-backup.conf`
        
    5) ìƒˆ êµ¬ì„± íŒŒì¼ì„ ë¡œë“œ
        
        `sudo mv TECH-PIONEERS.lircd.conf /etc/lirc/lircd.conf`
        
        `sudo /etc/init.d/lircd -n reload`
        
    6) êµ¬ì„± íŒŒì¼ í…ŒìŠ¤íŠ¸
        
        `irsend LIST TECH-PIONEERS ""`
        
    7) ë¦¬ëª¨ì»¨ ë²„íŠ¼ ë“±ë¡ í…ŒìŠ¤íŠ¸
        
        `irw`
        
    8)  ì—ëŸ¬ í•´ê²°
    - í—¤ë”ê°€ ì½”ë“œì— í¬í•¨ëœ ê²½ìš°
        - ë¬¸ì œ ìƒí™©: ë¦¬ëª¨ì»¨ ì„¤ì • íŒŒì¼(TECH-PIONEERS.lircd.conf )ë¥¼ ì—´ì–´ë³´ì•˜ì„ ë•Œ ê° í‚¤ì— ë™ì¼í•œ ê°’ 0x00000000ì´ í¬í•¨ë˜ì–´ ìˆì—ˆë‹¤. ì´ëŠ” í—¤ë”ì— í•´ë‹¹í•˜ëŠ” ë¶€ë¶„ì´ í‚¤ì˜ ì‹¤ì œ ì½”ë“œë¡œ ì˜¤ì¸ ë˜ì–´ì„œ irwì—ì„œ ì¸ì‹ì´ ë˜ì§€ ì•Šì•˜ë˜ ê²ƒì´ì—ˆë‹¤.
        - í•´ê²° ë°©ë²•: 0x00000000 ë¶€ë¶„ì„ ì§€ì›Œì„œ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ë‹¤.

    9) ë™ì‘ ì‚¬ì§„
        ![ë¦¬ëª¨ì»¨ ë™ì‘ ì‚¬ì§„](https://tech-pioneers.github.io/public/m-5/0514_remote.png)
    <br/><br/> 