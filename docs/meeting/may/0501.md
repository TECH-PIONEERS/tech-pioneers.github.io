---
title: 0501 íšŒì˜ë¡
layout: default
nav_order: 2
parent: 5ì›”
grand_parent: íšŒì˜ë¡
---

### ğŸ—“ï¸Â íšŒì˜ ì¼ì

2024.05.01
(10:00 - 16:00)

### ğŸ•› ì‘ì„±ì¼

2024.05.04

### ğŸš©Â íšŒì˜ ì¥ì†Œ

ì¸ì²œëŒ€í•™êµ

### ğŸ¤Â íšŒì˜ ì°¸ì„ì

êµ¬ë¯¼ì„±, ë¥˜ì§€ìˆ˜, ë°•ì£¼ë¯¸, í•œì˜ˆì§€

### ğŸ™Â ì‘ì„±ì

ë¥˜ì§€ìˆ˜

## ğŸ“£ ì–´ì  ë‹¤

- ë‚©ë•œ
- picamera ì—°ê²°
- ì–´ì•ˆì¹´ë©”ë¼ ë³´ì •

## âœï¸íšŒì˜ ë‚´ìš©

1. ë‚©ë•œ

   - IR sensor ë‚©ë•œ
   - ![image](../../../public/m-5/image.png)
   - ë„ì°©í•œ ê¸°íŒì— IR sensor 2ê°œë¥¼ ì™¼ìª½ ì˜¤ë¥¸ìª½ì— ë¶€ì°©
   - ê°€ìš´ë°ëŠ” ë°°í„°ë¦¬ ì¥ì°©

     <br/>

2. picamera ì—°ê²°

   **ì½”ë“œ ìˆ˜ì • 1**

   - ê¸°ì¡´ webcamìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ë˜ ì½”ë“œë¥¼ picameraë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œë¡œ ë³€ê²½
   - ê¸°ì¡´ì—ëŠ” cv2.VideoCapture(0)ë¡œ frameì„ ë°›ì•„ì™”ìœ¼ë‚˜ ì‚¬ìš© ì¤‘ì¸ ì–´ì•ˆì¹´ë©”ë¼ì˜ frameì„ ë°›ì•„ì˜¤ê¸° ìœ„í•´ì„œëŠ” picamera2 ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì•¼í–ˆë‹¤.

   ```
   //ê¸°ì¡´ ë°©ì‹
   vs = cv2.VideoCapture(0)

   //ìƒˆë¡œìš´ ë°©ì‹ (import ìƒëµ)
    picam2 = Picamera2()
    picam2.preview_configuration.main.size=(640, 400)
    picam2.preview_configuration.main.format = "RGB888"
    picam2.start()

    while True:
        cap = picam2.capture_array()

   ```

   - ë¼ì¦ˆë² ë¦¬íŒŒì´5ì—ëŠ” picamera2ê°€ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ìˆìœ¼ë‚˜ OS settingì— ë¬¸ì œê°€ ìˆì—ˆëŠ”ì§€ no moduled named picamera2ê°€ ëœ¨ë©´ì„œ picameraë¥¼ ì œëŒ€ë¡œ ì°¾ì§€ ëª»í•˜ì˜€ë‹¤.
   - íŒ€ì›ì´ ê°€ì§€ê³  ìˆëŠ” ë¼ì¦ˆë² ë¦¬íŒŒì´4ë¥¼ ì´ìš©í•˜ì—¬ ìƒˆë¡­ê²Œ ì‘ì„±í•œ ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸í•œ í›„ ëŒì•„ê°€ëŠ” ê²ƒì„ í™•ì¸í•˜ì˜€ë‹¤. ì´í›„ ë¼ì¦ˆë² ë¦¬íŒŒì´5 osë¥¼ ì´ˆê¸°í™”í•˜ê³  ë‹¤ì‹œ ì„¸íŒ…í•˜ëŠ” ì‹œê°„ì„ ê°€ì¡Œë‹¤.

   **ì½”ë“œ ìˆ˜ì • 2**

   - ê¸°ì¡´ì— í´ë¦­í•œ ì˜ì—­ì„ í¬ë¡­í•´ì£¼ëŠ” ì½”ë“œë¥¼ Picameraì— ë§ê²Œ ìˆ˜ì •í•˜ì˜€ë‹¤.
   - ê¸°ì¡´ ì½”ë“œ ë™ì‘ ë°©ì‹ : ìë¥¼ ì˜ì—­ í´ë¦­ -> ì´ì „ window destroy -> í¬ë¡­ëœ ìƒˆë¡œìš´ window open
   - ë°”ë€ ì½”ë“œ ë™ì‘ ë°©ì‹ : ìë¥¼ ì˜ì—­ í´ë¦­ -> í¬ë¡­ëœ ìƒˆë¡œìš´ window open
   - picameraë¥¼ ì‚¬ìš©í–ˆì„ ë•Œ ì´ì „ windowë¥¼ destory ì‹œí‚¤ë©´ `Segement fault` ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì—¬ ê¸°ì¡´ windowë„ ìœ ì§€í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ìˆ˜ì •í–ˆë‹¤.

   ```
   //cv2.destoryWindow ì£¼ì„ì²˜ë¦¬
   def get_position(event, x, y, flags, params):
    global start_x
    global start_y
    global end_x
    global end_y
    global flag
    if event == cv2.EVENT_LBUTTONDOWN:
        print("Clicked at (x={}, y={})".format(x, y))
        if flag == 0:
            start_x = x
            start_y = y
            flag = 1
        elif flag == 1:
            end_x = x
            end_y = y
            flag = 2  # flagë¥¼ 2ë¡œ ì„¤ì •í•˜ì—¬ cropí•  ì¢Œí‘œë¥¼ ëª¨ë‘ ì„ íƒí•œ ìƒíƒœë¡œ ë³€ê²½
            utils.pixel_to_cm(end_y-start_y)
            # cv2.destroyWindow('cap')  # ë§ˆìš°ìŠ¤ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ìœ„í•œ ì°½ ë‹«ê¸°
    return

   ```

3. ì–´ì•ˆ ì¹´ë©”ë¼ ë³´ì •

   - ë§í¬ë¥¼ ì°¸ê³ í•˜ì—¬ ì‚¬ìš© ì¤‘ì¸ ì¹´ë©”ë¼ ë Œì¦ˆì˜ ì™œê³¡ ì •ë„ë¥¼ íŒŒì•…í•˜ê³  í•´ë‹¹ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¹´ë©”ë¼ ë³´ì •ì„ ì§„í–‰í•˜ì˜€ë‹¤.
     https://m.blog.naver.com/tobsysco/90188394402
   - ë¨¼ì € ë³´ì •í•˜ëŠ” ë° ì‚¬ìš©í•˜ê¸° ìœ„í•œ íŒ¨í„´ì„ í”„ë¦°íŒ…í•˜ê³  ì¹´ë©”ë¼ë¡œ í•´ë‹¹ íŒ¨í„´ì„ ë‹¤ì–‘í•œ ê°ë„ì—ì„œ ì´¬ì˜í•œë‹¤.
   - ì ê²ŒëŠ” 20ì¥ìœ¼ë¡œë„ ë³´ì •í•  ìˆ˜ ìˆë‹¤ê³ í•˜ë‚˜ ìš°ë¦¬ëŠ” ì•½ 120ì¥ì˜ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.
   - ![image](../../../public/m-5/image2.png)

     ë³´ì •í•˜ì§€ì•Šì€ ìƒíƒœë¡œ ë°ì´í„° ìˆ˜ì§‘

   - ![image](../../../public/m-5/image3.png)

     GML Camera Calibration ToolBoxë¥¼ ì´ìš©í•˜ì—¬ ë³´ì •ì„ ìœ„í•œ ë°ì´í„° ì¶”ì¶œ

   - ë³´ì • ë°ì´í„° ìˆ˜ì§‘

   ```
    -------------v1--------------- (img)
    fx = 297.454574
    fy = 297.454574
    cx = 300.000000
    cy = 200.000000
    k1 = -0.237153
    k2 = 0.025004
    p1 = -0.008951
    p2 = -0.010148

    -------------v2--------------- (jmg)
    rms = 2.948340
    fx = 335.827093
    fy = 335.827093
    cx = 300.000000
    cy = 200.000000
    k1 = -0.354948
    k2 = 0.102152
    p1 = -0.041716
    p2 = -0.002760
    hfov = 83.5deg
    vfov = 61.6deg

    -------------v3--------------- (img+jmg)
    rms = 3.402954
    fx = 297.677019
    fy = 297.677019
    cx = 300.000000
    cy = 200.000000
    k1 = -0.266982
    k2 = 0.056298
    p1 = -0.030921
    p2 = -0.005686
    hfov = 90.4deg
    vfov = 67.8deg

   ```

   - ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë³´ì • ì½”ë“œ ì‘ì„±í•œ ê²°ê³¼
   - ![image](../../../public/m-5/image4.png)
   - ë³´ì •x ![image](../../../public/m-5/image6.png)
   - ë³´ì •O ![image](../../../public/m-5/image5.png)
