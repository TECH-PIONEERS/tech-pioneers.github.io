---
title: 0417 회의록
layout: default
nav_order: 2
parent: 4월
grand_parent: 회의록
---

### 🗓️ 회의 일자

2024.04.17
(15:00 - 16:30)

### 🕛 작성일

2024.04.21

### 🚩 회의 장소

인천대학교

### 🤝 회의 참석자

구민성, 류지수, 박주미, 한예지

### 🙎 작성자

구민성

## 📣 어젠다

- 카메라: openCV 코드 작성
- 카메라: 수선의 발 코드 작성

## ✏️회의 내용

1. **카메라: openCV 코드 작성**

   - 깃허브 > capstone > opecv > findall_0417.py - crop 코드 깃허브 > capstone > opecv > utils.py - px to mm
   - IR카메라가 아직 도착하지 않아서 해당 부분 코드 작성이 어려운 상황
   - 광각 카메라의 영상에서 필요한 부분만 crop하는 코드를 작성하였음.
   - crop 코드
     - 마우스 첫번쨰 클릭 좌표(x1, y1)와 마우스 두 번째 클릭 좌표(x2, y2)에 대해 기존 창 사이즈 (x2 - x1), (y2 - y1)으로 변경하여 골프 매트 영역만 유효하도록 함.
   - pixel to mm
     - 골프 매트의 폭이 200mm이다. 따라서 crop된 영상의 높이를 200mm이라고 할 수 있다.
     - crop영상의 높이와 골프 매트의 폭을 이용하여 1pixel이 몇 mm인지 계산하는 함수를 작성하였다.
     - 크롭 이전 기본 이미지
       ![no-crop](/public/4-1/nocrop.png)
     - 크롭 후 이미지
       ![crop](/public/4-1/crop.png)
     - 마우스 클릭한 영역 좌표와 1px to 1mm의 결과
       ![output](/public/4-1/output.png)
     <br/>

2. **카메라: 수선의 발 코드 작성**

   - 깃허브 > capstone > opecv > utils.py
   - 공과 헤드의 정렬을 위해 필요한 로직을 작성하였음.
   - 홀 좌표에서 헤드 IR카메라 2좌표를 연결한 직선 ⅰ에대해 수선의 발을 구한 뒤 IR센서 2개의 거리 내에 수선의 발이 포함될 경우 정렬되었다고 판단함.
```
def find_foot(a1, b1, a2, b2, a3, b3):
    # a1, b1 / a2, b2는 헤드 ir센서의 좌표
    # a3, b3는 홀의 좌표

    # 직선 l의 기울기 계산
    if a2 - a1 != 0:
        m = (b2 - b1) / (a2 - a1)
    else:
        m = float('inf')  # Handle vertical lines

    # Calculate perpendicular slope
    if m != 0:
        m_perpendicular = -1 / m
    else:
        m_perpendicular = float('inf')  # Handle vertical lines

    # 수선의 발 계산
    x_foot = (a3 + m * b3 - m * b1 + m * a1) / (m + 1/m)
    y_foot = b3 + m_perpendicular * (x_foot - a3)

    return x_foot, y_foot
# x_foot, y_foot이 헤드 범위 밖이라면 정렬x로 판단
```
     <br/>

3. **카메라 관련 해야하는 일 정리**

   - 어안카메라 보정
   - 좌표 매핑 코드 작성
